{% extends "base.html" %}
{% import "bootstrap/wtf.html" as wtf %}

    {% block content %}
<body>
    <div class="big-padding-top text-center">
            {% with messages = get_flashed_messages() %}
                {% if messages %}
                    {% for msg in messages %}
                        <p> {{msg}} </p>
                    {% endfor %}
                {% endif %}
            {% endwith %}
    </div>

<!--    Checkbox form for user's wholesalers-->
<div class="container">
  <div class="row align-items-center">
    <div class="col-lg-6 mx-auto">
        <div class="container">
            <form method="POST" action="" class="big-padding-top just-font-family">
                {{ form.hidden_tag()}}
                <h3>{{ form.user_wholesalers_selected_by_check_boxes.label(class="center-text") }}</h3>
                        {{ form.user_wholesalers_selected_by_check_boxes(name="wholesale_selector", class="lead fw-normal text-muted")}}
                        {{form.download_report(class="btn btn-primary col-8")}}
                    <br>
           </form>
       </div>
    </div>
  </div>
</div>
<!-- Insert here a list of which wholsalers they have with options to select them for running the report -->

<table id="myTable">

  <tr class="header">
    <th style="width:25%;">Name</th>
    <th style="width:15%;">Price</th>
    <th style="width:15%;">Quantity</th>
    <th style="width:25%;">Link</th>
  </tr>

  <tr>
    <input type="text" id="myInput" onkeyup="searchName()" placeholder="Search for names.." title="Type in a name" style="width: 20%">
    <input type="text" id="myInputPrice" onkeyup="searchPrice()" placeholder="Search for price.." title="Type in a price" style="width: 15%">
    <input type="text" id="myInputQuantity" onkeyup="searchQuantity()" placeholder="Search for quantity.." title="Type in a quantity" style="width: 15%">
    <input type="text" id="myInputLink" onkeyup="searchLink()" placeholder="Search for link.." title="Type in a link" style="width: 25%">
  </tr>

  {% for row in answer %}
      <tr>
            <td class="table-item"> {{ row[1] }}</td>
            <td class="table-item"> {{ row[2] }}</td>
            <td class="table-item"> {{ row[3] }}</td>
            <td class="table-item">{{ row[4] }}</td>
      </tr>
  {% endfor %}

</table>

<script>
    function searchName() {
      var input, filter, table, tr, td, i, txtValue;
      input = document.getElementById("myInput");
      filter = input.value.toUpperCase();
      table = document.getElementById("myTable");
      tr = table.getElementsByTagName("tr");
      for (i = 0; i < tr.length; i++) {
        td = tr[i].getElementsByTagName("td")[0];
        if (td) {
          txtValue = td.textContent || td.innerText;
          if (txtValue.toUpperCase().indexOf(filter) > -1) {
            tr[i].style.display = "";
          } else {
            tr[i].style.display = "none";
          }
        }
      }
    }

    function searchPrice() {
      var input, filter, table, tr, td, i, txtValue;
      input = document.getElementById("myInputPrice");
      filter = input.value.toUpperCase();
      table = document.getElementById("myTable");
      tr = table.getElementsByTagName("tr");
      for (i = 0; i < tr.length; i++) {
        td = tr[i].getElementsByTagName("td")[1];
        if (td) {
          txtValue = td.textContent || td.innerText;
          if (txtValue.toUpperCase().indexOf(filter) > -1) {
            tr[i].style.display = "";
          } else {
            tr[i].style.display = "none";
          }
        }
      }
    }

    function searchQuantity() {
      var input, filter, table, tr, td, i, txtValue;
      input = document.getElementById("myInputQuantity");
      filter = input.value.toUpperCase();
      table = document.getElementById("myTable");
      tr = table.getElementsByTagName("tr");
      for (i = 0; i < tr.length; i++) {
        td = tr[i].getElementsByTagName("td")[2];
        if (td) {
          txtValue = td.textContent || td.innerText;
          if (txtValue.toUpperCase().indexOf(filter) > -1) {
            tr[i].style.display = "";
          } else {
            tr[i].style.display = "none";
          }
        }
      }
    }


    function searchLink() {
      var input, filter, table, tr, td, i, txtValue;
      input = document.getElementById("myInputLink");
      filter = input.value.toUpperCase();
      table = document.getElementById("myTable");
      tr = table.getElementsByTagName("tr");
      for (i = 0; i < tr.length; i++) {
        td = tr[i].getElementsByTagName("td")[3];
        if (td) {
          txtValue = td.textContent || td.innerText;
          if (txtValue.toUpperCase().indexOf(filter) > -1) {
            tr[i].style.display = "";
          } else {
            tr[i].style.display = "none";
          }
        }
      }
    }
</script>


</body>
</html>
{% endblock %}